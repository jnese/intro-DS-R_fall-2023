<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Key">

<title>EDLD 651: Fall 2023 - Homework 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">EDLD 651: Fall 2023</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../data_list.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../install.qmd" rel="" target="">
 <span class="menu-text">Installs</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#create-a-rstudio-project-on-your-machine" id="toc-create-a-rstudio-project-on-your-machine" class="nav-link active" data-scroll-target="#create-a-rstudio-project-on-your-machine">Create a RStudio Project on your machine</a></li>
  <li><a href="#part-1" id="toc-part-1" class="nav-link" data-scroll-target="#part-1">Part 1</a></li>
  <li><a href="#part-2" id="toc-part-2" class="nav-link" data-scroll-target="#part-2">Part 2</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Key </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="create-a-rstudio-project-on-your-machine" class="level1">
<h1>Create a RStudio Project on your machine</h1>
<ul>
<li>Name the Project “hw_4”</li>
<li>Within the Project create a folder for <em>data</em> and <em>scripts</em>.</li>
<li>Download the following three datasets into the project <em>data</em> folder.
<ul>
<li><em>sesame13.sav</em></li>
<li><em>star.csv</em></li>
<li><em>ais.xlsx</em></li>
</ul></li>
<li>Save a hw_4.Rmd file in your <em>scripts</em> folder</li>
</ul>
</section>
<section id="part-1" class="level1">
<h1>Part 1</h1>
<p>Install and load the package <code>{Lahman}</code>, which will give you access to the <em>Teams</em> data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("Lahman")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Lahman)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="produce-a-subset-of-the-data-as-a-new-object-that-has-the-following-characteristics" class="level4">
<h4 class="anchored" data-anchor-id="produce-a-subset-of-the-data-as-a-new-object-that-has-the-following-characteristics">1. Produce a subset of the data (as a new object) that has the following characteristics:</h4>
<ul>
<li>only one team (your choice)</li>
<li>(try to you select a team that is currently still around, or it probably won’t be interesting; see a list of current at <a href="http://www.espn.com/mlb/teams" class="uri">http://www.espn.com/mlb/teams</a>).</li>
<li>data from 1980 to present (or as current as the dataset allows)</li>
<li>includes 5 columns: <code>name</code>, <code>yearID</code>, <code>W</code>, <code>L</code>, <code>R</code>, <code>RA</code>. These 5 variables correspond to the team name, the year, wins, losses, runs scored, and runs allowed).</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>teams <span class="ot">&lt;-</span> Teams <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>cubs <span class="ot">&lt;-</span> teams <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Chicago Cubs"</span> <span class="sc">&amp;</span> year_id <span class="sc">&gt;=</span> <span class="dv">1980</span>) <span class="sc">%&gt;%</span> <span class="co"># Only one team (your choice) &amp; data from 1980 to present</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(name, year_id, w, l, r, ra) <span class="co">#Includes 5 columns: name, yearID, W, L, R, RA</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new variable corresponding to the winning percentage for the team you chose over time</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>cubs <span class="ot">&lt;-</span> cubs <span class="sc">%&gt;%</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">w_pct =</span> w <span class="sc">/</span> (w <span class="sc">+</span> l))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="create-a-new-variable-corresponding-to-the-winning-percentage-for-the-team-you-chose-over-time" class="level4">
<h4 class="anchored" data-anchor-id="create-a-new-variable-corresponding-to-the-winning-percentage-for-the-team-you-chose-over-time">2. Create a new variable corresponding to the winning percentage for the team you chose over time:</h4>
<p><span class="math display">\[w_{pct} = \frac{wins}{wins + losses}\]</span> * Order by winning percentage: Least to greatest * Order by winning percentage: Greatest to least * Compute the <code>mean</code> and <code>standard deviation</code> of winning percentage</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Order by winning percentage: Least to greatest</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>cubs <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(w_pct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           name year_id   w   l   r  ra     w_pct
1  Chicago Cubs    1981  38  65 370 483 0.3689320
2  Chicago Cubs    2012  61 101 613 759 0.3765432
3  Chicago Cubs    1980  64  98 614 728 0.3950617
4  Chicago Cubs    2000  65  97 764 904 0.4012346
5  Chicago Cubs    2006  66  96 716 834 0.4074074
6  Chicago Cubs    2013  66  96 602 689 0.4074074
7  Chicago Cubs    1999  67  95 747 920 0.4135802
8  Chicago Cubs    2002  67  95 706 759 0.4135802
9  Chicago Cubs    1997  68  94 687 759 0.4197531
10 Chicago Cubs    1994  49  64 500 549 0.4336283
11 Chicago Cubs    1986  70  90 680 781 0.4375000
12 Chicago Cubs    1983  71  91 701 719 0.4382716
13 Chicago Cubs    2011  71  91 654 756 0.4382716
14 Chicago Cubs    2021  71  91 705 839 0.4382716
15 Chicago Cubs    1982  73  89 676 709 0.4506173
16 Chicago Cubs    2014  73  89 614 707 0.4506173
17 Chicago Cubs    2022  74  88 657 731 0.4567901
18 Chicago Cubs    2010  75  87 685 767 0.4629630
19 Chicago Cubs    1996  76  86 772 771 0.4691358
20 Chicago Cubs    1987  76  85 720 801 0.4720497
21 Chicago Cubs    1988  77  85 660 694 0.4753086
22 Chicago Cubs    1990  77  85 690 774 0.4753086
23 Chicago Cubs    1985  77  84 686 729 0.4782609
24 Chicago Cubs    1991  77  83 695 734 0.4812500
25 Chicago Cubs    1992  78  84 593 624 0.4814815
26 Chicago Cubs    2005  79  83 703 714 0.4876543
27 Chicago Cubs    1995  73  71 693 671 0.5069444
28 Chicago Cubs    2009  83  78 707 672 0.5155280
29 Chicago Cubs    1993  84  78 738 739 0.5185185
30 Chicago Cubs    2019  84  78 814 717 0.5185185
31 Chicago Cubs    2007  85  77 752 690 0.5246914
32 Chicago Cubs    2001  88  74 777 701 0.5432099
33 Chicago Cubs    2003  88  74 724 683 0.5432099
34 Chicago Cubs    2004  89  73 789 665 0.5493827
35 Chicago Cubs    1998  90  73 831 792 0.5521472
36 Chicago Cubs    2020  34  26 265 240 0.5666667
37 Chicago Cubs    2017  92  70 822 695 0.5679012
38 Chicago Cubs    1989  93  69 702 623 0.5740741
39 Chicago Cubs    2018  95  68 761 645 0.5828221
40 Chicago Cubs    1984  96  65 762 658 0.5962733
41 Chicago Cubs    2015  97  65 689 608 0.5987654
42 Chicago Cubs    2008  97  64 855 671 0.6024845
43 Chicago Cubs    2016 103  58 808 556 0.6397516</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Order by winning percentage: greatest to least</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>cubs <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(w_pct))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           name year_id   w   l   r  ra     w_pct
1  Chicago Cubs    2016 103  58 808 556 0.6397516
2  Chicago Cubs    2008  97  64 855 671 0.6024845
3  Chicago Cubs    2015  97  65 689 608 0.5987654
4  Chicago Cubs    1984  96  65 762 658 0.5962733
5  Chicago Cubs    2018  95  68 761 645 0.5828221
6  Chicago Cubs    1989  93  69 702 623 0.5740741
7  Chicago Cubs    2017  92  70 822 695 0.5679012
8  Chicago Cubs    2020  34  26 265 240 0.5666667
9  Chicago Cubs    1998  90  73 831 792 0.5521472
10 Chicago Cubs    2004  89  73 789 665 0.5493827
11 Chicago Cubs    2001  88  74 777 701 0.5432099
12 Chicago Cubs    2003  88  74 724 683 0.5432099
13 Chicago Cubs    2007  85  77 752 690 0.5246914
14 Chicago Cubs    1993  84  78 738 739 0.5185185
15 Chicago Cubs    2019  84  78 814 717 0.5185185
16 Chicago Cubs    2009  83  78 707 672 0.5155280
17 Chicago Cubs    1995  73  71 693 671 0.5069444
18 Chicago Cubs    2005  79  83 703 714 0.4876543
19 Chicago Cubs    1992  78  84 593 624 0.4814815
20 Chicago Cubs    1991  77  83 695 734 0.4812500
21 Chicago Cubs    1985  77  84 686 729 0.4782609
22 Chicago Cubs    1988  77  85 660 694 0.4753086
23 Chicago Cubs    1990  77  85 690 774 0.4753086
24 Chicago Cubs    1987  76  85 720 801 0.4720497
25 Chicago Cubs    1996  76  86 772 771 0.4691358
26 Chicago Cubs    2010  75  87 685 767 0.4629630
27 Chicago Cubs    2022  74  88 657 731 0.4567901
28 Chicago Cubs    1982  73  89 676 709 0.4506173
29 Chicago Cubs    2014  73  89 614 707 0.4506173
30 Chicago Cubs    1983  71  91 701 719 0.4382716
31 Chicago Cubs    2011  71  91 654 756 0.4382716
32 Chicago Cubs    2021  71  91 705 839 0.4382716
33 Chicago Cubs    1986  70  90 680 781 0.4375000
34 Chicago Cubs    1994  49  64 500 549 0.4336283
35 Chicago Cubs    1997  68  94 687 759 0.4197531
36 Chicago Cubs    1999  67  95 747 920 0.4135802
37 Chicago Cubs    2002  67  95 706 759 0.4135802
38 Chicago Cubs    2006  66  96 716 834 0.4074074
39 Chicago Cubs    2013  66  96 602 689 0.4074074
40 Chicago Cubs    2000  65  97 764 904 0.4012346
41 Chicago Cubs    1980  64  98 614 728 0.3950617
42 Chicago Cubs    2012  61 101 613 759 0.3765432
43 Chicago Cubs    1981  38  65 370 483 0.3689320</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the mean and standard deviation of winning percentage</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>cubs <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_winning_pct =</span> <span class="fu">mean</span>(w_pct),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_winning_pct =</span> <span class="fu">sd</span>(w_pct))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  mean_winning_pct sd_winning_pct
1        0.4867853     0.06853359</code></pre>
</div>
</div>
</section>
<section id="with-the-full-teams-data" class="level4">
<h4 class="anchored" data-anchor-id="with-the-full-teams-data">3. With the full <em>Teams</em> data:</h4>
<ul>
<li>Compute the <code>mean</code> and <code>standard deviation</code> of winning percentage for each team</li>
<li>Order by winning percentage, greatest to least</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>teams <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">w_pct =</span> w <span class="sc">/</span> (w <span class="sc">+</span> l)) <span class="sc">%&gt;%</span> <span class="co"># FIRST - compute the winning percentage</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_winning_pct =</span> <span class="fu">mean</span>(w_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="co"># compute the average winning percentage for each team</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_winning_pct =</span> <span class="fu">sd</span>(w_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="co"># compute the standard deviation of winning percentage for each team</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_winning_pct)) <span class="co"># Order by highest winning percentage</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 140 × 4
   name                         n mean_winning_pct sd_winning_pct
   &lt;chr&gt;                    &lt;int&gt;            &lt;dbl&gt;          &lt;dbl&gt;
 1 Boston Red Stockings         5            0.773         0.0911
 2 Cincinnati Outlaw Reds       1            0.657        NA     
 3 Boston Reds                  3            0.616         0.0790
 4 Providence Grays             8            0.609         0.0855
 5 Chicago White Stockings     17            0.609         0.117 
 6 Cincinnati Red Stockings     8            0.589         0.0640
 7 Boston Red Caps              7            0.579         0.0976
 8 New York Yankees           110            0.577         0.0685
 9 Brooklyn Ward's Wonders      1            0.576        NA     
10 Philadelphia Whites          3            0.574         0.0934
# ℹ 130 more rows</code></pre>
</div>
</div>
</section>
<section id="use-the-full-data-to-reproduce-the-plot-below" class="level4">
<h4 class="anchored" data-anchor-id="use-the-full-data-to-reproduce-the-plot-below">4. Use the full data to reproduce the plot below</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Please put the code for the plot in this chunk.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>teams <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">w_pct =</span> w <span class="sc">/</span> (w <span class="sc">+</span> l)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"New York Yankees"</span> <span class="sc">|</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>         name <span class="sc">==</span> <span class="st">"Detroit Tigers"</span> <span class="sc">|</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>         name <span class="sc">==</span> <span class="st">"San Diego Padres"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year_id, w_pct)) <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> name)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Team"</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="hw4-key_files/figure-html/plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="part-2" class="level1">
<h1>Part 2</h1>
<section id="read-in-the-following-three-datasets-using-here-and-the-package-of-your-choice-rio-readr-haven-readxl" class="level4">
<h4 class="anchored" data-anchor-id="read-in-the-following-three-datasets-using-here-and-the-package-of-your-choice-rio-readr-haven-readxl">1. Read in the following three datasets, using <code>{here}</code> and the package of your choice (<code>{rio}</code>, <code>{readr}</code>, <code>{haven}</code>, <code>{readxl}</code>)</h4>
<ul>
<li><em>sesame13.sav</em></li>
<li><em>star.csv</em></li>
<li><em>ais.xlsx</em></li>
</ul>
<p><strong>Hint</strong>: For the <em>ais.xlsx</em> data, look at the <code>skip</code> argument within the <a href="https://readxl.tidyverse.org/reference/read_excel.html"><code>{readxl}</code></a> help documentation.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>sesame <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"sesame13.sav"</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>star <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"star.csv"</span>))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ais <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"ais.xlsx"</span>), <span class="at">skip =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="using-the-ais-data-compute-the-average-red-blood-cell-count-and-average-bmi-by-sport.-output-these-data-as-spss-and-excel-files." class="level4">
<h4 class="anchored" data-anchor-id="using-the-ais-data-compute-the-average-red-blood-cell-count-and-average-bmi-by-sport.-output-these-data-as-spss-and-excel-files.">2. Using the <em>ais</em> data, compute the average red blood cell count and average <code>bmi</code> by sport. Output these data as SPSS and EXCEL files.</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>smry <span class="ot">&lt;-</span> ais <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sport) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_rcc =</span> <span class="fu">mean</span>(rcc),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bmi =</span> <span class="fu">mean</span>(bmi))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(smry, <span class="st">"summary_measures.sav"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(smry, <span class="st">"summary_measures.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="use-the-sesame-data-to-answer-the-following-question-was-the-average-female-age-higher-in-schools-or-at-home" class="level4">
<h4 class="anchored" data-anchor-id="use-the-sesame-data-to-answer-the-following-question-was-the-average-female-age-higher-in-schools-or-at-home">3. Use the <em>sesame</em> data to answer the following question: Was the average female age higher in schools or at home?</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sesame <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">characterize</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Female"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(setting) <span class="sc">%&gt;%</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  setting mean_age
  &lt;chr&gt;      &lt;dbl&gt;
1 Home        49.4
2 School      53.1</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer: School</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="first-how-many-rows-and-columns-are-in-the-star-data-next-remove-outliers-using-a-really-poor-method-just-for-practice-by-eliminating-students-whose-math-tmathss-scores-were-more-than-three-standard-deviations-above-or-below-the-corresponding-mean.-how-many-rows-are-in-the-data-now" class="level4">
<h4 class="anchored" data-anchor-id="first-how-many-rows-and-columns-are-in-the-star-data-next-remove-outliers-using-a-really-poor-method-just-for-practice-by-eliminating-students-whose-math-tmathss-scores-were-more-than-three-standard-deviations-above-or-below-the-corresponding-mean.-how-many-rows-are-in-the-data-now">4. First, how many rows and columns are in the <em>star</em> data? Next, remove outliers using a really poor method, just for practice, by eliminating students whose math (<code>tmathss</code>) scores were more than three standard deviations <strong>above <em>or</em> below</strong> the corresponding mean. How many rows are in the data now?</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(star) <span class="co"># 5748 rows, 12 columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5748   12</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tmathss <span class="sc">&lt;=</span> <span class="fu">mean</span>(tmathss) <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span><span class="fu">sd</span>(tmathss) <span class="sc">&amp;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>         tmathss <span class="sc">&gt;=</span> <span class="fu">mean</span>(tmathss) <span class="sc">-</span> <span class="dv">3</span><span class="sc">*</span><span class="fu">sd</span>(tmathss)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5743</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer: 5743  </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="use-the-star-data-to-compute-standardized-math-and-reading-scores-name-these-variables-tmathss-and-treadss.-to-create-standardized-scores-for-each-variable-math-and-reading-subtract-the-mean-from-each-observation-and-divide-by-the-standard-deviation-x_s-fracx_i---barxsdx." class="level4">
<h4 class="anchored" data-anchor-id="use-the-star-data-to-compute-standardized-math-and-reading-scores-name-these-variables-tmathss-and-treadss.-to-create-standardized-scores-for-each-variable-math-and-reading-subtract-the-mean-from-each-observation-and-divide-by-the-standard-deviation-x_s-fracx_i---barxsdx.">5. Use the <em>star</em> data to compute standardized math and reading scores; name these variables <em>tmathss</em> and <em>treadss</em>. To create standardized scores, for each variable (math and reading), subtract the mean from each observation and divide by the standard deviation: <span class="math inline">\(x_s = \frac{x_i - \bar{X}}{sd(X)}\)</span>.</h4>
<ul>
<li>Check that your computations were correct by computing the mean and standard deviation of each variable (they should be 0 and 1, respectively).</li>
<li>Compute the mean of the standardized variable for all <code>sex</code>/<code>frl</code> combinations. (I’m asking you to extend what you know here. We haven’t talked explicitly about how to do this yet, but you have seen examples).</li>
<li>What do you make of these findings? Do you see an effect by <code>sex</code>? An <code>frl</code> effect (<code>frl</code> stands for free/reduced lunch, and is a rough proxy for household income)? Is there evidence of an interaction (i.e., that the effect of <code>frl</code> is greater for boys versus girls)?</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>star <span class="ot">&lt;-</span> star <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stand_math =</span> (tmathss <span class="sc">-</span> <span class="fu">mean</span>(tmathss)) <span class="sc">/</span> <span class="fu">sd</span>(tmathss),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">stand_rdg  =</span> (treadss <span class="sc">-</span> <span class="fu">mean</span>(treadss)) <span class="sc">/</span> <span class="fu">sd</span>(treadss))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>star <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">stand_math_mean =</span> <span class="fu">mean</span>(stand_math),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_math_sd   =</span> <span class="fu">sd</span>(stand_math),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_rdg_mean =</span> <span class="fu">mean</span>(stand_rdg),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_rdg_sd   =</span> <span class="fu">sd</span>(stand_rdg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  stand_math_mean stand_math_sd stand_rdg_mean stand_rdg_sd
1     2.29625e-16             1  -6.278158e-16            1</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, frl) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">stand_math_mean =</span> <span class="fu">mean</span>(stand_math),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_math_sd   =</span> <span class="fu">sd</span>(stand_math),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_rdg_mean =</span> <span class="fu">mean</span>(stand_rdg),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">stand_rdg_sd   =</span> <span class="fu">sd</span>(stand_rdg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
# Groups:   sex [2]
  sex   frl   stand_math_mean stand_math_sd stand_rdg_mean stand_rdg_sd
  &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;
1 boy   no              0.151         0.970          0.148        1.02 
2 boy   yes            -0.330         0.965         -0.358        0.838
3 girl  no              0.326         0.962          0.371        1.09 
4 girl  yes            -0.170         0.969         -0.187        0.863</code></pre>
</div>
</div>
</section>
<section id="please-submit-you-.qmd-file-as-well-as-the-rendered-.html-file." class="level4">
<h4 class="anchored" data-anchor-id="please-submit-you-.qmd-file-as-well-as-the-rendered-.html-file.">Please submit you .qmd file, as well as the rendered .html file.</h4>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>